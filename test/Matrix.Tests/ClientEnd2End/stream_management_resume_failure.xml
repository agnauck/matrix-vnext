<stream>
  <stanza type="client" id="1">
    <![CDATA[<stream:stream xmlns:stream="http://etherx.jabber.org/streams" version="1.0" xmlns="jabber:client" to="localhost" xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">]]>
  </stanza>
  <stanza type="server" id="1">
    <![CDATA[<stream:stream xmlns:stream='http://etherx.jabber.org/streams' version='1.0' from='localhost' id='71a4bc43-3e09-44f3-9430-81ee7bf6b392' xml:lang='en' xmlns='jabber:client'>
            <stream:features>
                <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
                    <mechanism>PLAIN</mechanism>
                </mechanisms>
            </stream:features>]]>
  </stanza>

  <stanza type="client" id="2">
    <![CDATA[<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN">biwsbj1hbGV4LHI9enpCVUkyekJ2S2RxMndoMWZZNE5kU0JEZmovK0llRFkwaUJ4bk05UGJnaz0=</auth>]]>
  </stanza>
  <stanza type="server" id="2">
    <![CDATA[<success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>]]>
  </stanza>

  <stanza type="client" id="3">
    <![CDATA[<stream:stream xmlns:stream="http://etherx.jabber.org/streams" version="1.0" xmlns="jabber:client" to="localhost" xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">]]>
  </stanza>
  <stanza type="server" id="3">
    <![CDATA[<stream:stream xmlns:stream='http://etherx.jabber.org/streams' version='1.0' from='localhost' id='cf76e2b8-ac4e-4305-98bc-8bb116d94f25' xmlns='jabber:client'>
            <stream:features>
                <bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/>
                <sm xmlns='urn:xmpp:sm:3'/>                
            </stream:features>]]>
  </stanza>

  <stanza type="client" id="4">
    <![CDATA[<resume xmlns='urn:xmpp:sm:3'
              h='99'
              previd='b39f4f76-da2a-4785-8764-1fda0e6a5435'/>]]>
  </stanza>
  <stanza type="server" id="4">
    <![CDATA[<failed xmlns='urn:xmpp:sm:3'
        h='b39f4f76-da2a-4785-8764-1fda0e6a5435'>
          <item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
        </failed>]]>
  </stanza>

  <stanza type="client" id="5">
    <![CDATA[<iq type="set" id="bind_1">
                <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
                    <resource>MatriX</resource>
                </bind>
            </iq>]]>
  </stanza>
  <stanza type="server" id="5">
    <![CDATA[<iq type="result" id="{id}">
                <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
                    <jid>alex@localhost/MatriX</jid>
                </bind>
            </iq>]]>
  </stanza>

  <stanza type="client" id="6">
    <![CDATA[<enable xmlns='urn:xmpp:sm:3' resume='true'/>]]>
  </stanza>
  <stanza type="server" id="6">
    <![CDATA[<enabled xmlns='urn:xmpp:sm:3' id='g2gCbQAAAAZNYXRyaVhoA2IAAAYvYgAM4LVhD' resume='true'/>]]>
  </stanza>

  <stanza type="client" id="7">
    <![CDATA[</stream:stream>]]>
  </stanza>
  <stanza type="server" id="7">
    <![CDATA[</stream:stream>]]>
  </stanza>
</stream>